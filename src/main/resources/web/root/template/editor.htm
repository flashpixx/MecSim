<script type = "text/javascript" >

    var g_selected_asl = $("#mecsim_agent_files").val();

    var g_editor = CodeMirror(function(elt) {
        source.parentNode.replaceChild(elt, source);
    }, {
         value: source.value,
         lineNumbers: true,
    });

    // TODO: catch exeption if no file exists
    $.post(
        "cagentenvironment/jason/read",
        { "name" : g_selected_asl },
        function( px_data ) {
            g_editor.setValue( px_data.source );
        }
    )

    // save asl file
    // TODO: data field -> right?
    $("#mecsim_save_asl").click(function(){
    $.post(
            "cagentenvironment/jason/write",
            { "name" : $("#mecsim_agent_files").val(),
              "source" : g_editor.getValue(),
              "data" : g_editor.getValue()}
        );
    });






</script >

<form >
    <textarea id = "source" />
</form >